trigger:
- json-to-blob

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: DownloadSecureFile@1
  inputs:
    secureFile: 'mySecureFile.myFile.txt'
- task: AzureCLI@2
  displayName: 'Azure Login'
  inputs:
    scriptType: 'bash'
    azureSubscription: 'AzureRM authentication'

- task: AzureCLI@2
  displayName: 'Upload files to Azure Blob Container'
  inputs:
    scriptLocation: 'inline'
    scriptType: 'bash'
    script: |
      az storage blob upload-batch --destination container --source https://github.com/kar122/jsontoblob/raw/main/scenarios.json --account-name aksummasa --account-key $(DownloadStorageAccountKey.secureFilePath) --pattern *.json
